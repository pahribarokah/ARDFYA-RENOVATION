@startuml

!theme plain
skinparam backgroundColor white
skinparam shadowing false
skinparam handwritten false

' Styling sesuai contoh yang diberikan
skinparam participant {
    BackgroundColor #E3F2FD
    BorderColor #1976D2
    BorderThickness 2
    FontSize 11
}

skinparam arrow {
    Color black
    Thickness 2
}

skinparam sequence {
    ArrowColor black
    ActorBorderColor black
    LifeLineBorderColor black
    ParticipantBorderColor #1976D2
    ParticipantBackgroundColor #E3F2FD
    BoxBorderColor black
}

hide footbox

title **Sequence Diagram - UC02: Proses Inquiry**

participant "Admin" as Admin
participant "InquiryManagePage" as InquiryPage
participant "AdminInquiryController" as InquiryCtrl
participant "Inquiry Model" as InquiryModel

Admin -> InquiryPage: 1: ProcessInquiry (inquiry_id, decision)
activate InquiryPage

InquiryPage -> InquiryCtrl: 1.1: update(inquiry_id, decision)
activate InquiryCtrl

InquiryCtrl -> InquiryModel: 1.1.1: show(inquiry_id)
activate InquiryModel

InquiryModel --> InquiryCtrl: 1.1.1.1: inquiryData()
InquiryCtrl -> InquiryModel: 1.1.1.2: user()
InquiryModel --> InquiryCtrl: 1.1.1.2.1: customerData()

alt [Approve Decision]
    InquiryCtrl -> InquiryModel: 1.1.1.3: update(status='approved')
    InquiryModel --> InquiryCtrl: 1.1.1.3.1: statusUpdated()
    
    InquiryCtrl -> InquiryCtrl: 1.1.1.3.2: convertToProject()
    InquiryCtrl --> InquiryPage: 1.1.1.3.2.1: projectCreated()
    InquiryPage --> Admin: 1.1.1.3.2.1.1: showSuccessMessage()
    
else [Reject Decision]
    InquiryCtrl -> InquiryModel: 1.1.1.4: update(status='rejected')
    InquiryModel --> InquiryCtrl: 1.1.1.4.1: statusUpdated()
    InquiryCtrl --> InquiryPage: 1.1.1.4.1.1: inquiryRejected()
    InquiryPage --> Admin: 1.1.1.4.1.1.1: showRejectionMessage()
    
else [Need More Info]
    InquiryCtrl -> InquiryModel: 1.1.1.5: update(status='pending')
    InquiryModel --> InquiryCtrl: 1.1.1.5.1: statusUpdated()
    InquiryCtrl --> InquiryPage: 1.1.1.5.1.1: requestMoreInfo()
    InquiryPage --> Admin: 1.1.1.5.1.1.1: showPendingMessage()
end

deactivate InquiryModel
deactivate InquiryCtrl
deactivate InquiryPage

@enduml
