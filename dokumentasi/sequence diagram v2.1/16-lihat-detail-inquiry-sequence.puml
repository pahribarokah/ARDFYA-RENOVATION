@startuml

!theme plain
skinparam backgroundColor white
skinparam shadowing false
skinparam handwritten false

' Styling sesuai contoh yang diberikan
skinparam participant {
    BackgroundColor #E3F2FD
    BorderColor #1976D2
    BorderThickness 2
    FontSize 11
}

skinparam arrow {
    Color black
    Thickness 2
}

skinparam sequence {
    ArrowColor black
    ActorBorderColor black
    LifeLineBorderColor black
    ParticipantBorderColor #1976D2
    ParticipantBackgroundColor #E3F2FD
    BoxBorderColor black
}

hide footbox

title **Sequence Diagram - UC16: Lihat Detail Inquiry**

participant "Admin" as Admin
participant "InquiryDetailPage" as InquiryPage
participant "AdminInquiryController" as InquiryCtrl
participant "Inquiry Model" as InquiryModel

Admin -> InquiryPage: 1: ViewInquiryDetail (inquiry_id)
activate InquiryPage

InquiryPage -> InquiryCtrl: 1.1: show(inquiry_id)
activate InquiryCtrl

InquiryCtrl -> InquiryModel: 1.1.1: find(inquiry_id)
activate InquiryModel

InquiryModel --> InquiryCtrl: 1.1.1.1: inquiryData()

InquiryCtrl -> InquiryModel: 1.1.1.2: user()
InquiryModel --> InquiryCtrl: 1.1.1.2.1: customerData()

InquiryCtrl -> InquiryModel: 1.1.1.3: service()
InquiryModel --> InquiryCtrl: 1.1.1.3.1: serviceData()

InquiryCtrl -> InquiryModel: 1.1.1.4: getStatusColorAttribute()
InquiryModel --> InquiryCtrl: 1.1.1.4.1: statusColor()

InquiryCtrl -> InquiryModel: 1.1.1.5: getFormattedBudgetAttribute()
InquiryModel --> InquiryCtrl: 1.1.1.5.1: formattedBudget()

alt [Has Project Conversion]
    InquiryCtrl -> InquiryModel: 1.1.1.6: project()
    InquiryModel --> InquiryCtrl: 1.1.1.6.1: projectData()
    InquiryCtrl --> InquiryPage: 1.1.1.6.1.1: showInquiryWithProject()
    InquiryPage --> Admin: 1.1.1.6.1.1.1: displayConvertedInquiry()
    
else [No Project Yet]
    InquiryCtrl --> InquiryPage: 1.1.1.7: showInquiryOnly()
    InquiryPage --> Admin: 1.1.1.7.1: displayPendingInquiry()
end

InquiryCtrl -> InquiryModel: 1.1.2: updateLastViewed()
InquiryModel --> InquiryCtrl: 1.1.2.1: timestampUpdated()

InquiryCtrl --> InquiryPage: 1.1.2.1.1: renderInquiryDetail()
InquiryPage --> Admin: 1.1.2.1.1.1: displayInquiryDetail()

deactivate InquiryModel
deactivate InquiryCtrl
deactivate InquiryPage

@enduml
