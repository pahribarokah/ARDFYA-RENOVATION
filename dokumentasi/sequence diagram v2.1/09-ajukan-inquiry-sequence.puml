@startuml

!theme plain
skinparam backgroundColor white
skinparam shadowing false
skinparam handwritten false

' Styling sesuai contoh yang diberikan
skinparam participant {
    BackgroundColor #E3F2FD
    BorderColor #1976D2
    BorderThickness 2
    FontSize 11
}

skinparam arrow {
    Color black
    Thickness 2
}

skinparam sequence {
    ArrowColor black
    ActorBorderColor black
    LifeLineBorderColor black
    ParticipantBorderColor #1976D2
    ParticipantBackgroundColor #E3F2FD
    BoxBorderColor black
}

hide footbox

title **Sequence Diagram - UC09: Ajukan Inquiry**

participant "User" as User
participant "InquiryFormPage" as InquiryPage
participant "InquiryController" as InquiryCtrl
participant "Inquiry Model" as InquiryModel

User -> InquiryPage: 1: SubmitInquiry (inquiry_data, user_status)
activate InquiryPage

InquiryPage -> InquiryCtrl: 1.1: store(inquiry_data)
activate InquiryCtrl

alt [Logged In Customer]
    InquiryCtrl -> InquiryModel: 1.1.1: create(inquiry_with_user_id)
    activate InquiryModel
    
    InquiryModel --> InquiryCtrl: 1.1.1.1: inquiryCreated()
    InquiryCtrl -> InquiryModel: 1.1.1.1.1: service()
    InquiryModel --> InquiryCtrl: 1.1.1.1.1.1: serviceData()
    
    InquiryCtrl --> InquiryPage: 1.1.1.1.2: showInquirySuccess()
    InquiryPage --> User: 1.1.1.1.2.1: displaySuccessMessage()
    
else [Guest User]
    InquiryCtrl -> InquiryModel: 1.1.2: create(inquiry_as_guest)
    activate InquiryModel
    
    InquiryModel --> InquiryCtrl: 1.1.2.1: guestInquiryCreated()
    
    alt [Guest Wants to Register]
        InquiryCtrl --> InquiryPage: 1.1.2.1.1: suggestRegistration()
        InquiryPage --> User: 1.1.2.1.1.1: showRegistrationOption()
    else [Continue as Guest]
        InquiryCtrl --> InquiryPage: 1.1.2.1.2: showGuestSuccess()
        InquiryPage --> User: 1.1.2.1.2.1: displayGuestSuccess()
    end
end

InquiryCtrl -> InquiryModel: 1.1.3: getStatusColorAttribute()
InquiryModel --> InquiryCtrl: 1.1.3.1: statusColor()

InquiryCtrl --> InquiryPage: 1.1.3.1.1: finalizeInquiry()
InquiryPage --> User: 1.1.3.1.1.1: showInquiryReference()

deactivate InquiryModel
deactivate InquiryCtrl
deactivate InquiryPage

@enduml
